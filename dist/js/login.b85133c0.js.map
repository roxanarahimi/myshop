{"version":3,"file":"js/login.b85133c0.js","mappings":"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","sources":["webpack://myshop/./src/views/Login.vue","webpack://myshop/./src/views/Login.vue?240b"],"sourcesContent":["<template>\r\n  <div class=\"row p-0 m-0 w-100 d-grid\" style=\"min-height: 500px !important\">\r\n    <div class=\"col-10 col-lg-3 p-0 align-self-center mx-auto\">\r\n      <div class=\"card w-100\" style=\"border-color: #eeeeee !important; border-radius: 2px;\">\r\n        <div class=\"card-body p-0\">\r\n          <div v-if=\"!mobileValidated\" class=\"mobile-form\">\r\n            <p class=\"p-3 small\">برای ورود به سایت، شماره موبایل خود را وارد کنید.</p>\r\n            <form class=\"form-floating p-3\" dir=\"ltr\" @submit.prevent=\"validateMobile\">\r\n              <input type=\"number\" class=\"form-control en rounded rounded-1\" :class=\"{'is-invalid': invalidMobile}\"\r\n                     id=\"mobile\">\r\n              <label for=\"mobile\" class=\"form-label text-end\">شماره موبایل</label>\r\n\r\n            </form>\r\n            <ul class=\"small invalid-feedback d-block\">\r\n              <li v-for=\"error in errors\">{{ error }}</li>\r\n            </ul>\r\n            <button class=\"submit-btn bg-primary text-light\" @click=\"validateMobile\">دریافت کد تایید</button>\r\n          </div>\r\n          <div v-else id=\"verify-mobile\">\r\n            <p class=\"p-3 small\">کد تایید 4 رقمی برای شما پیامک شد. لطفا کد را وارد کنید.</p>\r\n            <div class=\"col-12 d-flex justify-content-between px-3 \">\r\n              <small disabled id=\"resend\" @click=\"resend\" class=\"text-black-50\">ارسال مجدد کد\r\n                <span id=\"time\">{{ time }}</span>\r\n              </small>\r\n              <small @click=\"editNumber\" class=\"text-black-50 cursor\">ویرایش شماره</small>\r\n            </div>\r\n\r\n            <form class=\"p-3\" dir=\"ltr\" @reset=\"focus1stInput\" @submit.prevent=\"checkCode\">\r\n              <div class=\"d-flex\">\r\n                <input type=\"number\" @input=\"inputHandle('1')\" class=\"code me-2 form-control text-center rounded rounded-1\" min=\"0\" max=\"9\" minlength=\"1\" maxlength=\"1\" :class=\"{'border-danger': invalidCode}\" id=\"code1\">\r\n                <input type=\"number\" @input=\"inputHandle('2')\" class=\"code me-2 form-control text-center rounded rounded-1\" min=\"0\" max=\"9\" minlength=\"1\" maxlength=\"1\" :class=\"{'border-danger': invalidCode}\" id=\"code2\">\r\n                <input type=\"number\" @input=\"inputHandle('3')\" class=\"code me-2 form-control text-center rounded rounded-1\" min=\"0\" max=\"9\" minlength=\"1\" maxlength=\"1\" :class=\"{'border-danger': invalidCode}\" id=\"code3\">\r\n                <input type=\"number\" @input=\"inputHandle('4')\" class=\"code form-control text-center rounded rounded-1\"  min=\"0\" max=\"9\" minlength=\"1\" maxlength=\"1\" :class=\"{'border-danger': invalidCode}\" id=\"code4\">\r\n              </div>\r\n              <ul class=\"small invalid-feedback d-block\" dir=\"rtl\">\r\n                <li v-if=\"invalidCode\">کد وارد شده اشتباه است\r\n                  <button class=\"btn-none\" type=\"reset\">پاک‌کن</button>\r\n                </li>\r\n              </ul>\r\n            </form>\r\n\r\n            <button class=\"submit-btn bg-primary text-light\" type=\"submit\">ورود</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {onMounted, ref} from \"vue\";\r\nimport App from \"@/App.vue\";\r\n\r\nexport default {\r\n  name: \"Login\",\r\n  setup() {\r\n    const invalidMobile = ref(false);\r\n    const mobileValidated = ref();\r\n    const invalidCode = ref(false);\r\n    const errors = ref([]);\r\n    onMounted(()=>{\r\n      document.querySelector('#mobile').focus();\r\n    })\r\n    const validateMobile = () => {\r\n      errors.value = [];\r\n      let mobile = document.querySelector('#mobile').value;\r\n      document.querySelector('#mobile').classList?.remove('is-invalid');\r\n\r\n      if (!mobile.startsWith('09')) {\r\n        errors.value.push('شماره موبایل باید با 09 شروع شود')\r\n      }\r\n      if (mobile.length !== 11) {\r\n        errors.value.push('شماره موبایل باید 11 رقم باشد')\r\n      }\r\n      if (errors.value.length) {\r\n        document.querySelector('#mobile').classList.add('is-invalid');\r\n      } else {\r\n        document.querySelector('#mobile').classList.add('is-valid');\r\n        mobileValidated.value = true;\r\n        localStorage.setItem('mobile',mobile);\r\n        //send otp\r\n        sendOtp(mobile);\r\n      }\r\n    }\r\n\r\n    const url = App.setup().url;\r\n    const mobile = ref(document.getElementById('mobile')?.value);\r\n\r\n    const time = ref(59);\r\n    const count = ()=>{\r\n      time.value = 59;\r\n    setInterval(()=> {\r\n      if (time.value >0) {\r\n        time.value = time.value -1;\r\n      }\r\n      }, 1000);\r\n\r\n\r\n\r\n    }\r\n    const sendOtp = (mobile) => {\r\n      // alert('otp sent!')\r\n      axios.post(url + '/api/user/otp',{mobile:mobile.value})\r\n          .then((response) => {\r\n            setTimeout(()=>{\r\n              count();\r\n              focus1stInput();\r\n            },200);\r\n          }).catch((error) => {\r\n        console.error(error)\r\n      });\r\n    };\r\n    const inputHandle = (id)=>{\r\n      document.querySelector('#code'+id).classList.remove('is-invalid');\r\n      let value = document.querySelector('#code'+id).value;\r\n      if (value<0 || value>9){\r\n        document.querySelector('#code'+id).classList.add('is-invalid');\r\n      }else{\r\n        console.log(value);\r\n        if (value != '' && value <=9 && value >= 0 ){\r\n          let n = parseInt(id)+1\r\n          document.querySelector('#code'+n)?.focus();\r\n        }\r\n\r\n      }\r\n      let code = document.querySelector('#code1').value +  document.querySelector('#code3').value+document.querySelector('#code3').value+document.querySelector('#code4').value;\r\n      checkCode(code);\r\n    }\r\n    const checkCode = (code)=>{\r\n      if (code.length === 4){\r\n        axios.post(url + '/api/user/verify',{code:code})\r\n            .then((response) => {\r\n              setTimeout(()=>{\r\n                invalidCode.value = false;\r\n                document.querySelectorAll('.code').forEach((element)=>{\r\n                  element.classList.remove('is-invalid');\r\n                  element.classList.add('is-valid');\r\n                });\r\n                //login\r\n                localStorage.setItem('user', JSON.stringify(response.user));\r\n                setTimeout(()=>{\r\n                  window.location = '/profile';\r\n                },2000)\r\n              },1000)\r\n            }).catch((error) => {\r\n          invalidCode.value = true;\r\n          console.error(error)\r\n        });\r\n        // if(code === '1111'){ //verify, if 200,\r\n        //\r\n        //\r\n        // }else{\r\n        //   invalidCode.value = true;\r\n        // }\r\n      }else{\r\n        invalidCode.value = false;\r\n      }\r\n    }\r\n    const focus1stInput = ()=>\r\n    {\r\n      console.log(document.querySelector('#code1'))\r\n      document.querySelector('#code1').focus();\r\n      invalidCode.value = false;\r\n\r\n    }\r\n\r\n    return {\r\n      invalidMobile, validateMobile, errors, sendOtp, invalidCode,\r\n      inputHandle, checkCode,focus1stInput,mobileValidated, url,\r\n      time, mobile\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { render } from \"./Login.vue?vue&type=template&id=6c90f773\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","style","id","dir","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","$setup","mobileValidated","_hoisted_7","_hoisted_8","disabled","onClick","_cache","args","_ctx","resend","_hoisted_9","_toDisplayString","time","editNumber","onReset","focus1stInput","onSubmit","_withModifiers","checkCode","_hoisted_10","type","onInput","$event","inputHandle","_normalizeClass","invalidCode","min","max","minlength","maxlength","_hoisted_11","_hoisted_12","_hoisted_5","validateMobile","invalidMobile","for","_hoisted_6","_Fragment","_renderList","errors","error","name","setup","ref","onMounted","document","querySelector","focus","value","mobile","classList","remove","startsWith","push","length","add","localStorage","setItem","sendOtp","url","App","getElementById","count","setInterval","axios","post","then","response","setTimeout","catch","console","log","n","parseInt","code","querySelectorAll","forEach","element","JSON","stringify","user","window","location","__exports__","render"],"ignoreList":[],"sourceRoot":""}